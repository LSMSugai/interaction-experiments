
{{ $css := resources.Get "jsPsych/css/jspsych.css" }}
{{ $style := $css | resources.Minify  | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $style.Permalink }}">

{{ $cssCustom := resources.Get "custom.css" }}
{{ $styleCustom := $cssCustom  | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $styleCustom.Permalink }}">

{{ $css := resources.Get "mediaElement/mediaelementplayer.css" }}
{{ $style := $css | resources.Minify  | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $style.Permalink }}">

{{ $css := resources.Get "annotorious/css/annotorious.css" }}
{{ $style := $css | resources.Minify  | resources.Fingerprint }}
<link rel="stylesheet" href="{{ $style.Permalink }}">

{{ $mediaElement := resources.Get "mediaElement/mediaelement-and-player.js" }}
{{ $mediaElement = $mediaElement | resources.Fingerprint }}
<script src="{{ $mediaElement.Permalink }}" integrity="{{ $mediaElement.Data.Integrity }}"></script>

{{ $mediaElement := resources.Get "annotorious/annotorious.min.js" }}
{{ $mediaElement = $mediaElement | resources.Fingerprint }}
<script src="{{ $mediaElement.Permalink }}" integrity="{{ $mediaElement.Data.Integrity }}"></script>

{{ $scratch := newScratch }}
{{ range $.Site.Data.assets.javascript }}
    {{ $scratch.Add "javascripts" (slice ( resources.Get . )) }}
{{ end}}

{{ $jsBundle := $scratch.Get "javascripts" | resources.Concat "js/jsPsychBundle.js"  }}
{{ $common := resources.Get "common.js" }}

{{ if eq $.Hugo.Environment "production" }}
    {{ $jsBundle = $jsBundle | resources.Minify }}

    {{ $secureJS := $jsBundle | resources.Fingerprint }}
    <script type="text/javascript" src="{{ $secureJS.Permalink }}" integrity="{{ $secureJS.Data.Integrity }}"></script>

    {{ $common = $common | resources.Fingerprint }}
    <script src="{{ $common.Permalink }}" integrity="{{ $common.Data.Integrity }}"></script>
{{ else }}
    <script type="text/javascript" src="{{ $jsBundle.Permalink }}" ></script>

    <script src="{{ $common.Permalink }}" ></script>
{{ end }}


 
